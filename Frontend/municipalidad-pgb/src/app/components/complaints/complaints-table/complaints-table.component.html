<div class="select-area d-flex">
    <div class="m-auto mt-4 mb-4">
        <label for="area">Área:</label>
        <select id="area" class="ms-3" (change)="onAreaChange($any($event.target).value)">
            <option value="">Todas las Áreas</option>
            @for(area of areasList; track area.id){
            <option value="{{ area.id }}">
                {{ area.nombre }}
            </option>
            }
        </select>
    </div>
</div>

@if (complaintsList && complaintsList.length > 0) {
<div class="overflow-auto">

    <table class="table table-striped table-hover table-bordered">
        <tr>
            <th class="p-4">N°</th>
            <th class="p-4">Motivo</th>
            <th class="p-4">Direccion</th>
            <th class="p-4">Descripcion</th>
            <th class="p-4">Fecha</th>
            <th class="p-4">Area</th>
            <th class="p-4">Acciones</th>
        </tr>
        @for (complaint of complaintsList; track complaint.id) {
        <tr class="text-break">
            <td class="fw-bold p-3 text-center">{{ complaint.id }}</td>
            <td class="p-2">{{ complaint.motivo }}</td>
            <td class="p-4">{{ complaint.direccion }}</td>
            <td class="p-2">{{ complaint.descripcion }}</td>
            <td class="p-2">{{ complaint.fecha_reclamo }}</td>
            <td class="p-2">{{ complaint.area?.nombre || 'Sin área' }}</td>
            <td class="p-2"><a href="#"><mat-icon>visibility</mat-icon></a></td>
            <td class="p-2"><a href="#"><mat-icon>edit</mat-icon></a></td>
            <td class="p-2"><a href="#"><mat-icon>delete</mat-icon></a></td>
        </tr>
        }
    </table>

    <mat-paginator [length]="totalElements" [pageSize]=6 [pageIndex]="pageIndex" [pageSizeOptions]="[6]"
        (page)="onPageChange($event)" [showFirstLastButtons]="true">
    </mat-paginator>
</div>
} @else if (error) {
<div>
    <p class="text-center error-msg mt-4">{{error}}</p>
</div>
} @else {
<p class="text-center mt-5">No se encontraron reclamos</p>
}